{"id":"guesthouseosaka-101","title":"Update house components to consume Sanity data","description":"Phase B.2 - House Components:\n- Update `house-about.tsx` to use Sanity query\n- Update `house-amenities.tsx` to use Sanity query\n- Update `house-pricing.tsx` to use Sanity query\n- Update `house-location.tsx` to use Sanity query\n- Update `house-building.tsx` to use Sanity query\n\nFiles in: `components/house/`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:19.769468+09:00","updated_at":"2025-12-21T20:49:45.135162+09:00","closed_at":"2025-12-21T20:49:45.135162+09:00","close_reason":"Closed","dependencies":[{"issue_id":"guesthouseosaka-101","depends_on_id":"guesthouseosaka-b6n","type":"blocks","created_at":"2025-12-21T20:27:32.030145+09:00","created_by":"daemon","metadata":"{}"}]}
{"id":"guesthouseosaka-3xt","title":"Fix GROQ query typegen: replace l() helper with inline coalesce","description":"The helper function `l(field)` in `sanity/lib/queries.ts` breaks automatic type generation from `defineQuery()`.\n\n**Problem:**\n- Template literal interpolation with the `l()` helper prevents TypeScript from inferring the correct return types\n- `bun run typegen` cannot statically analyze the query structure\n\n**Solution:**\n- Replace all `${l('fieldName')}` calls with inline `coalesce(fieldName[_key == $locale][0].value, fieldName[_key == \"en\"][0].value)`\n- Remove the `l()` helper function\n- Run `bun run typegen` to verify types are correctly inferred\n\n**Files:**\n- `sanity/lib/queries.ts`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T23:27:53.067732+09:00","updated_at":"2025-12-22T23:30:37.743357+09:00","closed_at":"2025-12-22T23:30:37.743357+09:00","close_reason":"Closed"}
{"id":"guesthouseosaka-5lw","title":"Update gallery components to consume Sanity data","description":"Phase B.3 - Gallery Components:\n- Update `house-gallery-client.tsx` to fetch images from Sanity\n- Update `image-block-gallery.tsx` to use Sanity images\n- Remove JSON-based image storage dependency\n\nFiles in: `components/gallery/`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:26.338751+09:00","updated_at":"2025-12-21T21:05:14.163457+09:00","closed_at":"2025-12-21T21:05:14.163457+09:00","close_reason":"Closed","dependencies":[{"issue_id":"guesthouseosaka-5lw","depends_on_id":"guesthouseosaka-b6n","type":"blocks","created_at":"2025-12-21T20:27:32.198339+09:00","created_by":"daemon","metadata":"{}"}]}
{"id":"guesthouseosaka-b6n","title":"Create GROQ queries for new document types","description":"Phase B.1 - Queries:\n- Create `settingsQuery` for global settings\n- Enhance `houseQuery` with gallery, amenities, pricing, location\n- Create `faqPageQuery` for FAQ page\n- Create `contactPageQuery` for contact page\n\nFile: `sanity/lib/queries.ts`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:11.983797+09:00","updated_at":"2025-12-21T20:36:36.356126+09:00","closed_at":"2025-12-21T20:36:36.356126+09:00","close_reason":"Closed","dependencies":[{"issue_id":"guesthouseosaka-b6n","depends_on_id":"guesthouseosaka-e9p","type":"blocks","created_at":"2025-12-21T20:27:31.801388+09:00","created_by":"daemon","metadata":"{}"}]}
{"id":"guesthouseosaka-dcq","title":"Seed taxonomy data in Sanity","description":"Phase C.1 - Seed Taxonomies:\n- Create 7 gallery categories (room, common-spaces, facilities, etc.)\n- Create 7 amenity categories (internet_climate, kitchen_dining, etc.)\n- Create ~25 amenities with icons and category references\n\nUse Sanity MCP tools for content operations.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:34.778507+09:00","updated_at":"2025-12-22T23:16:28.359179+09:00","closed_at":"2025-12-22T23:16:28.359179+09:00","close_reason":"Closed","dependencies":[{"issue_id":"guesthouseosaka-dcq","depends_on_id":"guesthouseosaka-e9p","type":"blocks","created_at":"2025-12-21T20:27:32.368099+09:00","created_by":"daemon","metadata":"{}"}]}
{"id":"guesthouseosaka-e9p","title":"Deploy Sanity schema and run typegen","description":"Phase A completion:\n- Run `bunx sanity schema deploy` to deploy schema to Content Lake\n- Run `bun run typegen` to regenerate TypeScript types\n- Verify types are generated correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:04.087434+09:00","updated_at":"2025-12-21T20:30:56.00111+09:00","closed_at":"2025-12-21T20:30:56.00111+09:00","close_reason":"Closed"}
{"id":"guesthouseosaka-huw","title":"Migrate house content to Sanity","description":"Phase C.2 - House Content:\nFor each house (apple, lemon, orange):\n- Upload gallery images to Sanity\n- Configure amenities with notes (private/shared) and featured flags\n- Enter pricing data (rows and notes)\n- Enter location data (address, coordinates, stations, nearby)\n- Enter about section (description, highlights)\n- Enter phone numbers\n\nSource: `messages/en.json` and existing component constants","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:42.90329+09:00","updated_at":"2025-12-21T20:26:42.90329+09:00","dependencies":[{"issue_id":"guesthouseosaka-huw","depends_on_id":"guesthouseosaka-dcq","type":"blocks","created_at":"2025-12-21T20:27:32.536859+09:00","created_by":"daemon","metadata":"{}"},{"issue_id":"guesthouseosaka-huw","depends_on_id":"guesthouseosaka-101","type":"blocks","created_at":"2025-12-21T20:27:32.711682+09:00","created_by":"daemon","metadata":"{}"},{"issue_id":"guesthouseosaka-huw","depends_on_id":"guesthouseosaka-5lw","type":"blocks","created_at":"2025-12-21T20:27:32.877774+09:00","created_by":"daemon","metadata":"{}"}]}
{"id":"guesthouseosaka-je9","title":"Migrate FAQ and settings content to Sanity","description":"Phase C.3 - Page Content:\n- Create FAQ items from `FAQAccordion` namespace in messages\n- Create contact types from `useContactNavigation` namespace\n- Create site settings (company name, social links)\n\nSource: `messages/en.json`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:48.925149+09:00","updated_at":"2025-12-21T20:26:48.925149+09:00","dependencies":[{"issue_id":"guesthouseosaka-je9","depends_on_id":"guesthouseosaka-dcq","type":"blocks","created_at":"2025-12-21T20:27:33.050451+09:00","created_by":"daemon","metadata":"{}"}]}
{"id":"guesthouseosaka-u32","title":"Cleanup: Remove redundant next-intl content","description":"Phase D - Cleanup:\n- Remove migrated namespaces from `messages/*.json`:\n  - HouseAbout, HouseAmenities, HousePricing, HouseLocation\n  - FAQAccordion (items only, keep structure)\n- Remove hardcoded data files in `lib/images/data/*.json`\n- Remove constants from components\n- Test all locales (en, ja, fr)\n- Update documentation","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T20:26:58.328787+09:00","updated_at":"2025-12-21T20:26:58.328787+09:00","dependencies":[{"issue_id":"guesthouseosaka-u32","depends_on_id":"guesthouseosaka-huw","type":"blocks","created_at":"2025-12-21T20:27:33.21937+09:00","created_by":"daemon","metadata":"{}"},{"issue_id":"guesthouseosaka-u32","depends_on_id":"guesthouseosaka-je9","type":"blocks","created_at":"2025-12-21T20:27:33.387106+09:00","created_by":"daemon","metadata":"{}"}]}
